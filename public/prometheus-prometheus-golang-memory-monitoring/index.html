<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/notes/styles.34c1555eaf028a1bf318.css" id="gatsby-global-css">.tippy-box[data-animation=shift-away][data-state=hidden]{opacity:0}.tippy-box[data-animation=shift-away][data-state=hidden][data-placement^=top]{transform:translateY(10px)}.tippy-box[data-animation=shift-away][data-state=hidden][data-placement^=bottom]{transform:translateY(-10px)}.tippy-box[data-animation=shift-away][data-state=hidden][data-placement^=left]{transform:translateX(10px)}.tippy-box[data-animation=shift-away][data-state=hidden][data-placement^=right]{transform:translateX(-10px)}</style><meta name="generator" content="Gatsby 3.2.0"/><link as="script" rel="preload" href="/notes/webpack-runtime-6ab9c6bdeef07b34c110.js"/><link as="script" rel="preload" href="/notes/framework-544fcf5a97337ccb1485.js"/><link as="script" rel="preload" href="/notes/app-180b2c4c68d8cb58bd57.js"/><link as="script" rel="preload" href="/notes/component---node-modules-gatsby-theme-andy-src-templates-note-js-f60ab987f54412c8d336.js"/><link as="fetch" rel="preload" href="/notes/page-data/prometheus-prometheus-golang-memory-monitoring/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/notes/page-data/app-data.json" crossorigin="anonymous"/></head><body><script>(function() { try {
  var mode = localStorage.getItem('theme-ui-color-mode');
  if (!mode) return
  document.body.classList.add('theme-ui-' + mode);
} catch (e) {} })();</script><div id="___gatsby"><style data-emotion-css="n0ecfm">body{color:var(--theme-ui-colors-text,#333);background-color:var(--theme-ui-colors-background,#fff);}</style><style data-emotion-css="1fthmpb">*{box-sizing:border-box;}body{margin:0;font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",sans-serif;line-height:1.5;font-weight:400;}</style><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion-css="bya3fr">.css-bya3fr{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100vh;min-height:100vh;}</style><style data-emotion-css="1ehwac2">.css-1ehwac2{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100vh;min-height:100vh;}</style><div class="css-1ehwac2"><header><style data-emotion-css="b38cxh">.css-b38cxh{border-bottom:1px solid;border-color:var(--theme-ui-colors-gray,#dadada);}</style><style data-emotion-css="bjpuxf">.css-bjpuxf{box-sizing:border-box;margin:0;min-width:0;padding-top:8px;padding-bottom:8px;padding-left:16px;padding-right:16px;border-bottom:1px solid;border-color:var(--theme-ui-colors-gray,#dadada);}</style><div class="css-bjpuxf"><style data-emotion-css="12j45zb">.css-12j45zb{font-weight:700;color:var(--theme-ui-colors-text,#333);-webkit-text-decoration:none;text-decoration:none;}</style><a class="css-12j45zb" href="/notes/">@kiennt&#x27;s notes</a></div></header><style data-emotion-css="lxqeq9">.css-lxqeq9{-webkit-flex:1;-ms-flex:1;flex:1;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;overflow-y:hidden;}@media screen and (min-width:768px){.css-lxqeq9{overflow-x:auto;}}</style><style data-emotion-css="1xopae2">.css-1xopae2{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1;-ms-flex:1;flex:1;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;overflow-y:hidden;}@media screen and (min-width:768px){.css-1xopae2{overflow-x:auto;}}</style><div class="css-1xopae2"><style data-emotion-css="9ms8w3">.css-9ms8w3{min-width:unset;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;-webkit-transition-duration:100px;transition-duration:100px;width:100%;}@media screen and (min-width:640px){.css-9ms8w3{width:100%;}}@media screen and (min-width:768px){.css-9ms8w3{-webkit-transition:width;transition:width;width:1152px;}}</style><style data-emotion-css="1806l1h">.css-1806l1h{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;min-width:unset;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;-webkit-transition-duration:100px;transition-duration:100px;width:100%;}@media screen and (min-width:640px){.css-1806l1h{width:100%;}}@media screen and (min-width:768px){.css-1806l1h{-webkit-transition:width;transition:width;width:1152px;}}</style><div class="note-columns-container css-1806l1h"><style data-emotion-css="q7ai65">.css-q7ai65{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;overflow-y:auto;max-width:100%;width:100%;left:0;right:-585px;}@media screen and (min-width:640px){.css-q7ai65{max-width:100%;width:100%;}}@media screen and (min-width:768px){.css-q7ai65{position:-webkit-sticky;position:sticky;max-width:100vw;width:576px;}}</style><style data-emotion-css="108dckd">.css-108dckd{box-sizing:border-box;margin:0;min-width:0;padding-left:16px;padding-right:16px;background-color:var(--theme-ui-colors-background,#fff);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;overflow-y:auto;max-width:100%;width:100%;left:0;right:-585px;}@media screen and (min-width:640px){.css-108dckd{max-width:100%;width:100%;}}@media screen and (min-width:768px){.css-108dckd{position:-webkit-sticky;position:sticky;max-width:100vw;width:576px;}}</style><div class="note-container css-108dckd"><style data-emotion-css="qkbcne">.css-qkbcne{display:none;-webkit-transition:opacity;transition:opacity;-webkit-transition-duration:100px;transition-duration:100px;opacity:0;}@media screen and (min-width:640px){.css-qkbcne{display:none;}}@media screen and (min-width:768px){.css-qkbcne{display:block;}}</style><style data-emotion-css="1d4xrqf">.css-1d4xrqf{box-sizing:border-box;margin:0;min-width:0;display:none;-webkit-transition:opacity;transition:opacity;-webkit-transition-duration:100px;transition-duration:100px;opacity:0;}@media screen and (min-width:640px){.css-1d4xrqf{display:none;}}@media screen and (min-width:768px){.css-1d4xrqf{display:block;}}</style><div class="css-1d4xrqf"><style data-emotion-css="1557ki8">.css-1557ki8{position:absolute;z-index:10;-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg);-webkit-transform-origin:left;-ms-transform-origin:left;transform-origin:left;}</style><style data-emotion-css="1vxydnz">.css-1vxydnz{box-sizing:border-box;margin:0;min-width:0;padding-bottom:8px;position:absolute;z-index:10;-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg);-webkit-transform-origin:left;-ms-transform-origin:left;transform-origin:left;}</style><div class="css-1vxydnz"><style data-emotion-css="y5zp6v">.css-y5zp6v{font-weight:700;-webkit-text-decoration:none;text-decoration:none;color:var(--theme-ui-colors-text,#333);}</style><a class="css-y5zp6v" href="/notes/prometheus-prometheus-golang-memory-monitoring/prometheus-prometheus-golang-memory-monitoring">prometheus-prometheus-golang-memory-monitoring</a></div></div><style data-emotion-css="1jnayfl">.css-1jnayfl{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100%;-webkit-transition:opacity;transition:opacity;-webkit-transition-duration:100px;transition-duration:100px;opacity:1;}</style><style data-emotion-css="1xvlbb1">.css-1xvlbb1{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100%;-webkit-transition:opacity;transition:opacity;-webkit-transition-duration:100px;transition-duration:100px;opacity:1;}</style><div class="css-1xvlbb1"><style data-emotion-css="1rr4qq7">.css-1rr4qq7{-webkit-flex:1;-ms-flex:1;flex:1;}</style><div class="css-1rr4qq7"><style data-emotion-css="1ebprri">.css-1ebprri{margin-top:16px;margin-bottom:16px;}</style><style data-emotion-css="xz3bt">.css-xz3bt{color:#333;font-family:inherit;line-height:1.125;font-weight:700;font-size:32px;margin-top:16px;margin-bottom:16px;}</style><h1 class="css-xz3bt">prometheus-prometheus-golang-memory-monitoring</h1><style data-emotion-css="1ccy11i">.css-1ccy11i{color:#333;font-family:inherit;line-height:1.125;font-weight:700;font-size:32px;color:#333;font-family:inherit;line-height:1.125;font-weight:700;font-size:32px;}</style><h1 class="css-1ccy11i">Prometheus or Golang applicaions memory leak troubleshooting</h1><ul class="css-0"><li class="css-0"><style data-emotion-css="18ci6ln">.css-18ci6ln{color:#3182ce;-webkit-text-decoration:none;text-decoration:none;}.css-18ci6ln:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><style data-emotion-css="embvvb">.css-embvvb{color:#3182ce;padding-left:2px;padding-right:2px;margin-left:-2px;margin-right:-2px;border-radius:4px;color:#3182ce;-webkit-text-decoration:none;text-decoration:none;}.css-embvvb:hover{background-color:#fafafc;}.css-embvvb:focus{background-color:#fafafc;}.css-embvvb:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><a class="css-embvvb" href="/notes/prometheus-prometheus-golang-memory-monitoring/#prometheus-or-golang-applicaions-memory-leak-troubleshooting">Prometheus or Golang applicaions memory leak troubleshooting</a><ul class="css-0"><li class="css-0"><a class="css-embvvb" href="/notes/prometheus-prometheus-golang-memory-monitoring/#1-environment-version--issue">1. Environment, version &amp; issue</a><ul class="css-0"><li class="css-0"><a class="css-embvvb" href="/notes/prometheus-prometheus-golang-memory-monitoring/#11-environment">1.1. Environment</a></li><li class="css-0"><a class="css-embvvb" href="/notes/prometheus-prometheus-golang-memory-monitoring/#12-issue">1.2. Issue</a></li></ul></li><li class="css-0"><a class="css-embvvb" href="/notes/prometheus-prometheus-golang-memory-monitoring/#2-troubleshooting">2. Troubleshooting</a><ul class="css-0"><li class="css-0"><a class="css-embvvb" href="/notes/prometheus-prometheus-golang-memory-monitoring/#21-golang-version">2.1. Golang version</a></li><li class="css-0"><a class="css-embvvb" href="/notes/prometheus-prometheus-golang-memory-monitoring/#22-does-it-affect-prometheus-memory-usage">2.2. Does it affect Prometheus memory usage?</a></li></ul></li><li class="css-0"><a class="css-embvvb" href="/notes/prometheus-prometheus-golang-memory-monitoring/#3-choose-the-right-metric-for-prometheus-memory-monitoring">3. Choose the right metric for Prometheus memory monitoring</a></li></ul></li></ul><style data-emotion-css="cq6ij1">.css-cq6ij1{color:#333;font-family:inherit;line-height:1.125;font-weight:700;font-size:24px;color:#333;font-family:inherit;line-height:1.125;font-weight:700;font-size:24px;}</style><h2 class="css-cq6ij1">1. Environment, version &amp; issue</h2><style data-emotion-css="jgtg8i">.css-jgtg8i{color:#333;font-family:inherit;line-height:1.125;font-weight:700;font-size:20px;color:#333;font-family:inherit;line-height:1.125;font-weight:700;font-size:20px;}</style><h3 class="css-jgtg8i">1.1. Environment</h3><ul class="css-0"><li class="css-0">Prometheus v2.1x.</li><li class="css-0">Golang &gt;= 1.12.</li><li class="css-0">Cadvisor v0.35.0</li><li class="css-0">Containerize.</li><li class="css-0">Linux kernel 3.10.xxx</li></ul><h3 class="css-jgtg8i">1.2. Issue</h3><ul class="css-0"><li class="css-0">The memory leak might happen when Prometheus server receives a huge query. We expect its memory to come up then down.</li><li class="css-0">Prometheus server memory usage is increasing without ever coming down. This might look like a leak or some bug in memory allocation. Even worse it looks like the container is just about to run OOM.</li><li class="css-0">Prometheus keeps sending alerts.</li><li class="css-0">Which metric is used? <code class="css-0">container_memory_usage_bytes</code> and <code class="css-0">container_memory_working_set_bytes</code>.</li></ul><h2 class="css-cq6ij1">2. Troubleshooting</h2><h3 class="css-jgtg8i">2.1. Golang version</h3><ul class="css-0"><li class="css-0">Started from version 1.12, Golang runtime now uses <code class="css-0">MADV_FREE</code> to release unused memory, check <a class="css-18ci6ln" href="https://golang.org/doc/go1.12#runtime">the release note</a>:</li></ul><style data-emotion-css="mwhsaa">.css-mwhsaa{font-family:Menlo,monospace;overflow-x:auto;font-family:Menlo,monospace;overflow-x:auto;}.css-mwhsaa code{color:inherit;}.css-mwhsaa code{color:inherit;}</style><pre class="css-mwhsaa"><style data-emotion-css="tej46y">.css-tej46y{font-family:Menlo,monospace;font-size:inherit;font-family:Menlo,monospace;font-size:inherit;}</style><code class="css-tej46y">MADV_DONTNEED -&gt; MADV_FREE (if available)
</code></pre><ul class="css-0"><li class="css-0"><style data-emotion-css="19iowwu">.css-19iowwu{color:#333;color:#333;}</style><p class="css-19iowwu">Go deeper, Golang runtime uses <a class="css-18ci6ln" href="https://man7.org/linux/man-pages/man2/madvise.2.html">madvise</a> system call - <code class="css-0">give advice about use of memory</code>. There are many advice values, but we are only care about these two:</p><ul class="css-0"><li class="css-0"><code class="css-0">MADV_DONTNEED</code>: Do not expect access in the near future. (For the time being, the application is finished with the given range, so the kernel can free resources associated with it).</li><li class="css-0"><code class="css-0">MADV_FREE</code> (<strong class="css-0">since kernel 4.5</strong>): The application no longer requires the pages in the range specified by addr and len. The kernel can thus free these pages, but the freeing could be delayed until memory pressure occurs.</li></ul></li><li class="css-0"><p class="css-19iowwu"><code class="css-0">MADVISE_FREE</code> was added in Linux 4.5. Fall back to <code class="css-0">MADV_DONTNEED</code> if it is not supported. Check the <a class="css-18ci6ln" href="https://go-review.googlesource.com/c/go/+/135395">patch</a>.</p></li></ul><p class="css-19iowwu"><style data-emotion-css="1k89gbo">.css-1k89gbo{max-width:100%;max-width:100%;}</style><img src="./imgs/runtime_madv_free.png" class="css-1k89gbo"/></p><ul class="css-0"><li class="css-0">The kernel won&#x27;t free resources associated with the given range until memory pressure occurs. Memory pressure means that other processes or the kernel itself do not have enough memory in the unused pool.</li><li class="css-0"><code class="css-0">Go runtime is reluctant to give memory pages back</code>.</li></ul><h3 class="css-jgtg8i">2.2. Does it affect Prometheus memory usage?</h3><ul class="css-0"><li class="css-0">Go runtime is reluctant to give memory pages back so Prometheus memory usage won&#x27;t be down if there are still enough resources in pool. It makes sense. But the used Linux kernel is just 3.10, it shouldn&#x27;t act like that. Go runtime should fall back to use <code class="css-0">MADV_DONTNEED</code>.</li><li class="css-0">Prometheus server is containerized so might it have a different behavior? <em class="css-0">No, there&#x27;s no kernel inside a container. Containers are processes, they also make system calls to the kernel</em>. The behavior should be the same.</li></ul><p class="css-19iowwu"><img src="https://www.redhat.com/cms/managed-files/styles/wysiwyg_full_width/s3/2015/07/user-space-vs-kernel-space-simple-container.png?itok=ptougYzT" class="css-1k89gbo"/></p><ul class="css-0"><li class="css-0">To make sure, I use <a class="css-18ci6ln" href="https://man7.org/linux/man-pages/man1/strace.1.html">strace</a> to trace system calls in the host. (No images here due to company privacy policies)</li></ul><pre class="css-mwhsaa"><code class="language-bash css-tej46y"># Check kernel
$ uname -a
Linux hlc6fctl-2 3.10.0-957.5.1.el7.x86_64 #1 SMP Fri Feb 1 14:54:57 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux
# Get prometheus pid first
$ ps aux | grep prometheus
# Strace
$ strace -p &lt;pid&gt; -e trace=madvise
# strace -p &lt;pid&gt; 2&gt;&amp;1 | grep madvise
</code></pre><ul class="css-0"><li class="css-0">The result... Somehow it still uses <code class="css-0">MADV_FREE</code> even the linux kernel is 3.10 :confused:</li></ul><pre class="css-mwhsaa"><code class="language-bash css-tej46y">$ strace -p 22433 2&gt;&amp;1 | grep madvise
madvise(0xcb708d0000, 8192, MADV_FREE)  = 0
madvise(0xcb70860000, 8192, MADV_FREE)  = 0
madvise(0xcb703ce000, 8192, MADV_FREE)  = 0
madvise(0xcb7037c000, 8192, MADV_FREE)  = 0
madvise(0xcb52fca000, 8192, MADV_FREE)  = 0
madvise(0xcb52fba000, 8192, MADV_FREE)  = 0
madvise(0xcb52f7c000, 8192, MADV_FREE)  = 0
madvise(0xcb52eea000, 8192, MADV_FREE)  = 0
madvise(0xcb52ee8000, 8192, MADV_FREE)  = 0
madvise(0xcb52ee2000, 8192, MADV_FREE)  = 0
madvise(0xcb52e88000, 8192, MADV_FREE)  = 0
madvise(0xcb52d00000, 8192, MADV_FREE)  = 0
madvise(0xcb52cf0000, 8192, MADV_FREE)  = 0
madvise(0xcb52c24000, 8192, MADV_FREE)  = 0
madvise(0xcb52b4c000, 8192, MADV_FREE)  = 0
madvise(0xcb52b4a000, 8192, MADV_FREE)  = 0
madvise(0xcb52b26000, 8192, MADV_FREE)  = 0
madvise(0xcb52b22000, 8192, MADV_FREE)  = 0
madvise(0xcb52a9a000, 8192, MADV_FREE)  = 0
madvise(0xcb52a36000, 8192, MADV_FREE)  = 0
madvise(0xcb529e4000, 8192, MADV_FREE)  = 0
madvise(0xcb5289e000, 8192, MADV_FREE)  = 0
madvise(0xcb5289c000, 8192, MADV_FREE)  = 0
madvise(0xcb52896000, 8192, MADV_FREE)  = 0
madvise(0xcb52836000, 8192, MADV_FREE)  = 0
madvise(0xcb52810000, 8192, MADV_FREE)  = 0
madvise(0xcb527ee000, 8192, MADV_FREE)  = 0
madvise(0xcb527ec000, 8192, MADV_FREE)  = 0
</code></pre><p class="css-19iowwu"><img src="https://i.pinimg.com/originals/95/02/20/950220f35e72e2b772b81e04a948173a.jpg" class="css-1k89gbo"/></p><p class="css-19iowwu"><img src="https://i.ytimg.com/vi/rClNZLXSKA8/maxresdefault.jpg" class="css-1k89gbo"/></p><ul class="css-0"><li class="css-0">I get stuck right there, but at least it explains everything - why Prometheus memory usage doesn&#x27;t go down.</li></ul><h2 class="css-cq6ij1">3. Choose the right metric for Prometheus memory monitoring</h2><ul class="css-0"><li class="css-0"><code class="css-0">container_memory_usage_bytes</code>: <em class="css-0">NOPE</em> - From the <a class="css-18ci6ln" href="https://www.kernel.org/doc/Documentation/cgroup-v1/memory.txt">cgroup doc</a>:</li></ul><pre class="css-mwhsaa"><code class="css-tej46y">For efficiency, as other kernel components, memory cgroup uses some optimization to avoid unnecessary cacheline false sharing. usage_in_bytes is affected by the method and doesn’t show ‘exact’ value of memory (and swap) usage, it’s a fuzz value for efficient access. (Of course, when necessary, it’s synchronized.) If you want to know more exact memory usage, you should use RSS+CACHE(+SWAP) value in memory.stat(see 5.2).
</code></pre><ul class="css-0"><li class="css-0"><code class="css-0">container_memory_working_set_bytes</code>: <em class="css-0">BETTER BUT NOT ENOUGH</em> - It takes the fuzzy, still include cache/buffer.</li></ul><pre class="css-mwhsaa"><code class="language-go css-tej46y">workingSet := ret.Memory.Usage
  if v, ok := s.MemoryStats.Stats[&quot;total_inactive_file&quot;]; ok {
    if workingSet &lt; v {
      workingSet = 0
    } else {
      workingSet -= v
    }
  }
  ret.Memory.WorkingSet = workingSet
</code></pre><ul class="css-0"><li class="css-0"><code class="css-0">go_memstats_alloc_bytes</code> and others (<code class="css-0">go_memstats_.*_inuse_byte</code>): <em class="css-0">GOOD</em> - Get the actual allocations, it helps filter out the memory that is &quot;cached&quot;. Note that <code class="css-0">container_memory_.*_bytes</code> can have totally different update intervals to <code class="css-0">go_memstats_.*_bytes</code> .</li></ul></div><style data-emotion-css="rl6otz">.css-rl6otz{border-radius:8px;}</style><style data-emotion-css="19qk7ja">.css-19qk7ja{box-sizing:border-box;margin:0;min-width:0;padding:16px;margin-bottom:8px;background-color:#fafafc;color:#718096;border-radius:8px;}</style><div class="css-19qk7ja"><style data-emotion-css="rp57em">.css-rp57em{box-sizing:border-box;margin:0;min-width:0;font-family:inherit;font-weight:700;line-height:1.125;color:#718096;}</style><h4 class="css-rp57em">Referred in</h4><style data-emotion-css="19idom">.css-19idom{margin-bottom:8px;}</style><div class="css-19idom"><style data-emotion-css="ovwx2x">.css-ovwx2x{-webkit-text-decoration:none;text-decoration:none;color:#718096;}.css-ovwx2x:hover{color:#333;}</style><a class="css-ovwx2x" href="/notes/about"><style data-emotion-css="1jpm9pd">.css-1jpm9pd{padding-top:8px;padding-bottom:8px;}</style><div class="css-1jpm9pd"><style data-emotion-css="18iut6x">.css-18iut6x{font-size:16px;margin:0;color:#718096;}</style><style data-emotion-css="ouorfz">.css-ouorfz{color:#333;font-size:16px;margin:0;color:#718096;}</style><p class="css-ouorfz">About these notes</p><style data-emotion-css="uvfa58">.css-uvfa58{font-size:14px;margin:0;color:#718096;}</style><style data-emotion-css="1hddlwb">.css-1hddlwb{color:#333;font-size:14px;margin:0;color:#718096;}</style><p class="css-1hddlwb">Hi, I&#x27;m  Kien Nguyen-Tuan  👋. prometheus-promql-gotchas prometheus-prometheus-promql-join prometheus-prometheus-labels-relabel prometheus…</p></div></a></div><style data-emotion-css="4erca1">.css-4erca1{margin-left:auto;margin-right:auto;width:64px;}</style><hr class="css-4erca1"/><style data-emotion-css="1cev0y9">.css-1cev0y9{margin:0;font-size:14px;}</style><p class="css-1cev0y9">If you think this note resonated, be it positive or negative, please feel free to send me an<!-- --> <style data-emotion-css="15vz5gh">.css-15vz5gh{-webkit-text-decoration:underline;text-decoration:underline;color:#718096;}</style><style data-emotion-css="lnu7pe">.css-lnu7pe{color:#3182ce;-webkit-text-decoration:none;text-decoration:none;-webkit-text-decoration:underline;text-decoration:underline;color:#718096;}.css-lnu7pe:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><a href="mailto:kiennt2609@gmail.com" class="css-lnu7pe">email</a> <!-- -->and we can talk.</p></div></div></div></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/prometheus-prometheus-golang-memory-monitoring";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-534f3e0c52e5660f4540.js"],"app":["/app-180b2c4c68d8cb58bd57.js"],"component---node-modules-gatsby-theme-andy-src-templates-note-js":["/component---node-modules-gatsby-theme-andy-src-templates-note-js-f60ab987f54412c8d336.js"]};/*]]>*/</script><script src="/notes/polyfill-534f3e0c52e5660f4540.js" nomodule=""></script><script src="/notes/component---node-modules-gatsby-theme-andy-src-templates-note-js-f60ab987f54412c8d336.js" async=""></script><script src="/notes/app-180b2c4c68d8cb58bd57.js" async=""></script><script src="/notes/framework-544fcf5a97337ccb1485.js" async=""></script><script src="/notes/webpack-runtime-6ab9c6bdeef07b34c110.js" async=""></script></body></html>