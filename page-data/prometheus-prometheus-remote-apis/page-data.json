{"componentChunkName":"component---node-modules-gatsby-theme-andy-src-templates-note-js","path":"/prometheus-prometheus-remote-apis","result":{"data":{"brainNote":{"slug":"prometheus-prometheus-remote-apis","title":"prometheus-prometheus-remote-apis","childMdx":{"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"prometheus-prometheus-remote-apis\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", null, \"Prometheus Remote APIs\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#prometheus-remote-apis\"\n  }, \"Prometheus Remote APIs\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#1-overview\"\n  }, \"1. Overview\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#2-remote-write\"\n  }, \"2. Remote Write\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#21-wal-based-remote-write\"\n  }, \"2.1. WAL-based remote write\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#22-tunning\"\n  }, \"2.2. Tunning\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#23-use-cases\"\n  }, \"2.3. Use cases\")))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#3-remote-read\"\n  }, \"3. Remote read\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#31-the-non-streamed-version\"\n  }, \"3.1. The non-streamed version\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#32-the-chunked-streamed-version\"\n  }, \"3.2. The chunked, streamed version\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#33-use-cases\"\n  }, \"3.3. Use cases\")))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#4-source\"\n  }, \"4. Source\"))))), mdx(\"h2\", null, \"1. Overview\"), mdx(\"p\", null, \"Since version 1.x, Prometheus has the abilitiy to interact directly with its storage using the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://prometheus.io/docs/prometheus/latest/storage/#remote-storage-integrations\"\n  }, \"remote APIs\"), \".\"), mdx(\"p\", null, \"This API allows 3rd party systems to interact with metrics data through two methods:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Write\"), \": receive samples pushed by Prometheus.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Read\"), \": pull samples from Prometheus.\")), mdx(\"p\", null, \"Both methods are using HTTP with message encoded with \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/protocolbuffers/protobuf\"\n  }, \"protobuf\"), \". The request and response for both methods are compressed using \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/google/snappy\"\n  }, \"snappy\"), \".\"), mdx(\"h2\", null, \"2. Remote Write\"), mdx(\"h3\", null, \"2.1. WAL-based remote write\"), mdx(\"h3\", null, \"2.2. Tunning\"), mdx(\"h3\", null, \"2.3. Use cases\"), mdx(\"h2\", null, \"3. Remote read\"), mdx(\"p\", null, \"The key idea of the remote read is to \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"allow querying Prometheus storage TSDB directly without PromQL evaluation\"), \". It is similar to the Querier interface that the PromQL engine uses to retrieve data from storage.\"), mdx(\"h3\", null, \"3.1. The non-streamed version\"), mdx(\"p\", null, \"Problems:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"No streaming capabilities within single HTTP request for the protobuf format.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The response was including raw samples (\", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"float64\"), \" value and \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"int64\"), \" timestamp) instead of an encoded, compressed batch of samples - chunks that are used to store metrics inside TSDB.\")), mdx(\"h3\", null, \"3.2. The chunked, streamed version\"), mdx(\"h3\", null, \"3.3. Use cases\"), mdx(\"h2\", null, \"4. Source\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://prometheus.io/docs/practices/remote_write/\"\n  }, \"https://prometheus.io/docs/practices/remote_write/\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://prometheus.io/blog/2019/10/10/remote-read-meets-streaming/\"\n  }, \"https://prometheus.io/blog/2019/10/10/remote-read-meets-streaming/\"))));\n}\n;\nMDXContent.isMDXComponent = true;"},"inboundReferenceNotes":[{"title":"About these notes","slug":"about","childMdx":{"excerpt":"Hi, I'm  Kien Nguyen-Tuan  ðŸ‘‹. prometheus-promql-gotchas prometheus-prometheus-promql-join prometheus-prometheus-labels-relabel prometheusâ€¦"}}],"outboundReferenceNotes":[]},"site":{"siteMetadata":{"title":"@kiennt's notes"}}},"pageContext":{"slug":"prometheus-prometheus-remote-apis"}},"staticQueryHashes":[]}